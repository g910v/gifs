import{D as P,C as R,r as a,P as B,u as C,O as y,m as M,c as F,a as U,b as k,d as A,f as E,e as G,s as V,j as u,g as z,h as H}from"./index-0cdc1f3e.js";import{T as W,u as $,a as Y,b as q,B as J}from"./ImgContent-e7f107b7.js";import{G as Q}from"./GifsGrid-c33ec68d.js";function _(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function X(t){if(Array.isArray(t))return _(t)}function Z(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function L(t,e){if(t){if(typeof t=="string")return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(t,e)}}function ee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function te(t){return X(t)||Z(t)||L(t)||ee()}var d={DEFAULT_MASKS:{pint:/[\d]/,int:/[\d\-]/,pnum:/[\d\.]/,money:/[\d\.\s,]/,num:/[\d\-\.]/,hex:/[0-9a-f]/i,email:/[a-z0-9_\.\-@]/i,alpha:/[a-z_]/i,alphanum:/[a-z0-9_]/i},getRegex:function(e){return d.DEFAULT_MASKS[e]?d.DEFAULT_MASKS[e]:e},onBeforeInput:function(e,n,r){r||!P.isAndroid()||this.validateKey(e,e.data,n)},onKeyPress:function(e,n,r){r||P.isAndroid()||e.ctrlKey||e.altKey||this.validateKey(e,e.key,n)},onPaste:function(e,n,r){if(!r){var o=this.getRegex(n),s=e.clipboardData.getData("text");te(s).forEach(function(p){if(!o.test(p))return e.preventDefault(),!1})}},validateKey:function(e,n,r){if(n!=null){var o=n.length===1;if(o){var s=this.getRegex(r);s.test(n)||e.preventDefault()}}},validate:function(e,n){var r=e.target.value,o=!0,s=this.getRegex(n);return r&&!s.test(r)&&(o=!1),o}};function O(){return O=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O.apply(this,arguments)}function g(t){"@babel/helpers - typeof";return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(t)}function re(t,e){if(g(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(g(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ne(t){var e=re(t,"string");return g(e)==="symbol"?e:String(e)}function ae(t,e,n){return e=ne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var oe={root:function(e){var n=e.props,r=e.isFilled;return F("p-inputtext p-component",{"p-disabled":n.disabled,"p-filled":r},n.className)}},x=R.extend({defaultProps:{__TYPE:"InputText",__parentMetadata:null,keyfilter:null,validateOnly:!1,tooltip:null,tooltipOptions:null,onBeforeInput:null,onInput:null,onKeyDown:null,onPaste:null,children:void 0},css:{classes:oe}});function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D(Object(n),!0).forEach(function(r){ae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var N=a.memo(a.forwardRef(function(t,e){var n=a.useContext(B),r=x.getProps(t,n),o=x.setMetaData(T(T({props:r},r.__parentMetadata),{},{context:{disabled:r.disabled}})),s=o.ptm,p=o.cx,v=o.isUnstyled;C(x.css.styles,v,{name:"inputtext",styled:!0});var c=a.useRef(e),b=function(l){r.onKeyDown&&r.onKeyDown(l),r.keyfilter&&d.onKeyPress(l,r.keyfilter,r.validateOnly)},f=function(l){r.onBeforeInput&&r.onBeforeInput(l),r.keyfilter&&d.onBeforeInput(l,r.keyfilter,r.validateOnly)},m=function(l){var I=l.target,K=!0;r.keyfilter&&r.validateOnly&&(K=d.validate(l,r.keyfilter)),r.onInput&&r.onInput(l,K),y.isNotEmpty(I.value)?P.addClass(I,"p-filled"):P.removeClass(I,"p-filled")},j=function(l){r.onPaste&&r.onPaste(l),r.keyfilter&&d.onPaste(l,r.keyfilter,r.validateOnly)};a.useEffect(function(){y.combinedRefs(c,e)},[c,e]);var S=a.useMemo(function(){return y.isNotEmpty(r.value)||y.isNotEmpty(r.defaultValue)},[r.value,r.defaultValue]),i=y.isNotEmpty(r.tooltip),h=M({className:p("root",{isFilled:S}),onBeforeInput:f,onInput:m,onKeyDown:b,onPaste:j},x.getOtherProps(r),s("root"));return a.createElement(a.Fragment,null,a.createElement("input",O({ref:c},h)),i&&a.createElement(W,O({target:c,content:r.tooltip},r.tooltipOptions,{pt:s("tooltip")})))}));N.displayName="InputText";const ue=()=>{const t=$(),{gifList:e,loading:n,totalRecord:r,fetching:o,error:s}=Y(i=>i.gifGridReducer),[p,v]=U(),c=a.useRef(null),{t:b}=k(),[f,m]=a.useState(""),j=()=>{m(""),t(A()),v(i=>(i.delete("text"),i))},S=()=>{t(H()),t(E(f))};return a.useEffect(()=>{const i=setTimeout(()=>{f.length>1&&(t(A()),t(E(f)),v(h=>(h.set("text",f),h)))},1e3);return()=>clearTimeout(i)},[f,t]),a.useEffect(()=>{o&&(e==null?void 0:e.length)!==r&&(t(G()),t(E(f)))},[o,t]),a.useEffect(()=>(p.get("text")&&m(p.get("text")??""),()=>{t(V())}),[]),a.useEffect(()=>{var i;s&&((i=c.current)==null||i.show({severity:"warn",summary:"Не удалось выполнить запрос",detail:s,life:4500}))},[s]),u.jsxs("div",{className:"w-full flex flex-column align-items-center justify-content-center p-3 lg:pt-8 pt-5",children:[u.jsx(q,{ref:c,position:"bottom-left"}),u.jsxs("span",{className:"p-input-icon-left p-input-icon-right lg:mb-6 mb-3 lg:w-9 w-11",children:[u.jsx("i",{className:"pi pi-search w-max"}),u.jsx(N,{value:f,onChange:i=>m(i.target.value),placeholder:b("search"),className:"w-full",style:{backgroundColor:"transparent",border:"1px solid var(--text-color)"}}),n&&u.jsx("i",{className:"pi pi-spin pi-spinner mr-1"}),!n&&!!f.length&&u.jsx("i",{className:"pi pi-times mr-1 cursor-pointer",onClick:j})]}),!n&&(e==null?void 0:e.length)===0&&u.jsx("div",{children:b("emptyMessage")}),e&&u.jsx(Q,{gifList:e}),!!(e!=null&&e.length)&&n&&u.jsx(z,{className:"w-5rem mt-5",strokeWidth:"3"}),s&&u.jsx(J,{text:!0,icon:"pi pi-refresh",onClick:S})]})};export{ue as default};
